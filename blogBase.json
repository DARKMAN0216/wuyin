{"singlePage": [], "startSite": "", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "needComment": 1, "allHead": "", "title": "Blog Title", "subTitle": "Blog description", "avatarUrl": "https://github.githubassets.com/favicons/favicon.svg", "GMEEK_VERSION": "last", "postListJson": {"P1": {"htmlDir": "docs/post/WPF-shu-zi-shi-zhong-dai-ma-ji-lu.html", "labels": ["enhancement"], "postTitle": "WPF\u6570\u5b57\u65f6\u949f\u4ee3\u7801\u8bb0\u5f55", "postUrl": "post/WPF-shu-zi-shi-zhong-dai-ma-ji-lu.html", "postSourceUrl": "https://github.com/DARKMAN0216/wuyin/issues/1", "commentNum": 0, "wordCount": 2899, "description": "\n**ViewBox**\n\u6570\u5b57\u65f6\u949f\u903b\u8f91\u7c7b\n\n    public class DigitalClockViewClock : BaseViewModel, IDisposable\n    {\n    private DispatcherTimer _timer;\n    private string _currentDateTimeString;\n    private string _currentDayOfWeekString;\n    // \u66b4\u9732\u7ed9 View \u7ed1\u5b9a\u7684\u5c5e\u6027\n    public string CurrentDateTimeString\n    {\n        get => _currentDateTimeString;\n        set => Set(ref _currentDateTimeString, value);\n    }\n    public string CurrentDayOfWeekString\n    {\n        get => _currentDayOfWeekString;\n        set => Set(ref _currentDayOfWeekString, value);\n    }\n    public DigitalClockViewClock()\n    {\n        // \u521d\u59cb\u5316\u5b9a\u65f6\u5668\n        _timer = new DispatcherTimer();\n        _timer.Interval = TimeSpan.FromSeconds(1); // \u6bcf\u79d2\u66f4\u65b0\u4e00\u6b21\n        _timer.Tick += Timer_Tick\n        // \u7acb\u5373\u66f4\u65b0\u4e00\u6b21\u663e\u793a\n        UpdateDateTime();\n        // \u542f\u52a8\u5b9a\u65f6\u5668\n        _timer.Start();\n    }\n\n    private void Timer_Tick(object sender, EventArgs e)\n    {\n        // \u5b9a\u65f6\u5668\u89e6\u53d1\u65f6\u66f4\u65b0 ViewModel \u7684\u5c5e\u6027\n        UpdateDateTime();\n    }\n\n    private void UpdateDateTime()\n    {\n        DateTime now = DateTime.Now;\n\n        // \u66f4\u65b0\u65e5\u671f\u548c\u65f6\u95f4 (\u683c\u5f0f: YYYY-MM-DD HH:mm)\n        CurrentDateTimeString = now.ToString('yyyy-MM-dd HH:mm');\n\n        // \u66f4\u65b0\u661f\u671f\u51e0 (\u683c\u5f0f: \u661f\u671f\u4e00, \u661f\u671f\u4e8c, ...)\n        CurrentDayOfWeekString = now.ToString('dddd');\n    }\n\n    // \u5b9e\u73b0 IDisposable \u63a5\u53e3\uff0c\u7528\u4e8e\u6e05\u7406\u8d44\u6e90\uff08\u505c\u6b62\u5b9a\u65f6\u5668\uff09\n    public void Dispose()\n    {\n        Dispose(true);\n        GC.SuppressFinalize(this);\n    }\n\n    protected virtual void Dispose(bool disposing)\n    {\n        if (disposing)\n        {\n            // \u505c\u6b62\u5b9a\u65f6\u5668\u5e76\u79fb\u9664\u4e8b\u4ef6\u5904\u7406\u5668\n            if (_timer != null)\n            {\n                _timer.Stop();\n                _timer.Tick -= Timer_Tick;\n                _timer = null;\n            }\n        }\n    }\n\n    // Finalizer (\u5982\u679c Dispose \u6ca1\u6709\u88ab\u8c03\u7528\uff0c\u5783\u573e\u56de\u6536\u5668\u4f1a\u5c1d\u8bd5\u8c03\u7528\u5b83)\n    ~DigitalClockViewClock()\n    {\n        Dispose(false);\n    }\n    }\n\n**MainWindowView.xaml.cs**\n\u6570\u5b57\u65f6\u949f\u5c55\u793a\u53ca\u56de\u6536\n\n    public partial class MainWindowView: Window\n    {\n    private DigitalClockViewClock _digitalClockViewClock;\n    public MainWindowView()\n    {\n        InitializeComponent();\n        _digitalClockViewClock = new DigitalClockViewClock();\n\n        // \u5c06 ViewModel \u8bbe\u7f6e\u4e3a DataContext\n        this.DataContext = _digitalClockViewClock;\n\n        // \u5728\u7a97\u53e3\u5173\u95ed\u65f6\u5904\u7406 ViewModel \u7684 Dispose\n        this.Closed += MainWindowView_Closed;\n    }\n\n    private void MainWindowView_Closed(object sender, EventArgs e)\n    {\n        // \u5728\u7a97\u53e3\u5173\u95ed\u65f6\u8c03\u7528 ViewModel \u7684 Dispose \u65b9\u6cd5\n        if (_digitalClockViewClock != null)\n        {\n            _digitalClockViewClock.Dispose();\n            _digitalClockViewClock = null;\n        }\n    }\n    }\n\n**HGDigitalTwinWindow.xaml**\n\u6570\u5b57\u65f6\u949fxaml\u5c55\u793a\n\n    <StackPanel Grid.Column='2' Margin='0,0,10,0' Orientation='Horizontal'>\n    <TextBlock Text='{Binding CurrentDateTimeString}' Foreground='#D4F4F1' FontSize='25'/>\n    <TextBlock Text='{Binding CurrentDayOfWeekString}' Foreground='#D4F4F1' HorizontalAlignment='Right' FontSize='25' Margin='10,0'/>\n    </StackPanel>\u3002", "top": 0, "createdAt": 1749889257, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2025-06-14", "dateLabelColor": "#0969da"}, "P2": {"htmlDir": "docs/post/WPF MVVM-kuang-jia-ji-chu-lei-zhi-yi-BaseViewModel.html", "labels": ["enhancement"], "postTitle": "WPF MVVM\u6846\u67b6\u57fa\u7840\u7c7b\u4e4b\u4e00BaseViewModel", "postUrl": "post/WPF%20MVVM-kuang-jia-ji-chu-lei-zhi-yi-BaseViewModel.html", "postSourceUrl": "https://github.com/DARKMAN0216/wuyin/issues/2", "commentNum": 0, "wordCount": 1314, "description": "**\u6838\u5fc3\u76ee\u7684**\n\u5f53ViewModel\u6570\u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u7ed1\u5b9a\u5bf9\u5e94\u5c5e\u6027\u7684View\u4e5f\u8981\u53d1\u751f\u53d8\u5316\uff0c\u4e24\u8005\u4e4b\u95f4\u7684\u901a\u77e5\u673a\u5236\u662f\u901a\u8fc7\u5b9e `System.ComponentModel.INotifyPropertyChanged`  \u63a5\u53e3\u6765\u5b8c\u6210\u7684\u3002", "top": 0, "createdAt": 1750156982, "style": "", "script": "", "head": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2025-06-17", "dateLabelColor": "#0969da"}}, "singeListJson": {}, "labelColorDict": {"bug": "#d73a4a", "documentation": "#0075ca", "duplicate": "#cfd3d7", "enhancement": "#a2eeef", "good first issue": "#7057ff", "help wanted": "#008672", "invalid": "#e4e669", "question": "#d876e3", "wontfix": "#ffffff"}, "displayTitle": "Blog Title", "faviconUrl": "https://github.githubassets.com/favicons/favicon.svg", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "homeUrl": "https://DARKMAN0216.github.io/wuyin", "prevUrl": "disabled", "nextUrl": "disabled"}